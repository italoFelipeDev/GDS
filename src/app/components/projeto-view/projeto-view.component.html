<div *ngIf="isUsuarioAutorizadoAcesso()">
    <div class="container d-inline-flex flex-row justify-content-between mt-5">

        <div class="d-inline-flex flex-column" style="margin-right: 15vw;">
            <div class="media mb-5 d-flex flex-column align-self-start justify-content-center ">
                <img class="mr-3 rounded-circle d-flex align-self-center" src={{projeto.icone}} alt="Icone projeto"
                    style="width: 200px; height: 200px; object-fit:cover;">
                <div class="media-body d-flex align-self-center flex-column justify-content-center">
                    <h4 class="mt-3 d-flex align-self-center">{{projeto.nome}}</h4>
                    <div class="d-flex align-self-center" style="text-align: center;">
                        {{projeto.descricao}}
                    </div>
                </div>
                <!-- Botão Cadastrar Impedimento -->
                <button type="button" class="btn btn-primary mt-2" data-bs-toggle="modal"
                    data-bs-target="#editarProjetoModal">
                    Editar Projeto
                </button>
            </div>

            <div class="card mb-5" style="width: 18rem;">
                <div class="card-header bg-primary d-flex flex-row justify-content-between">
                    <div class="d-flex  align-self-center">
                        Participantes do Projeto
                    </div>
                    <!-- Botão Modal Adicionar Usuario -->
                    <button type="button" class="btn btn-outline-light align-self-center d-flex" data-bs-toggle="modal"
                        data-bs-target="#adicionarParticipanteModal" style="height: 30px; align-items: center;">
                        +
                    </button>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item d-flex flex-row justify-content-between bg-secondary border border-dark"
                        *ngFor="let participante of listaParticipantes">

                        <img class="rounded-circle align-self-center img-fluid" src={{participante.icone}}
                            alt="Icone do Participante"
                            style="width: 35px; height: 35px; min-width: 35px; min-height: 35px; max-width: 35px; min-height: 35px; object-fit:cover;">

                        <div class="d-flex align-self-center" style="margin-right: auto; margin-left: 0.7rem;">
                            {{participante.nome}}</div>

                        <span *ngIf="isUsuarioDaListaScrumMaster(participante)"
                            class="badge badge-secondary bg-primary d-flex align-self-center"
                            style="height: fit-content; padding: 5px ;">Scrumaster</span>

                        <button *ngIf="isUsuarioScrumMaster() && !isUsuarioDaListaScrumMaster(participante) "
                            type="button" class="btn btn-danger btn-sm ml-auto align-self-center"
                            style="min-height: 30px; max-height: 30px;"
                            (click)="removerParticipante(participante)">Remover</button>
                    </li>
                </ul>
            </div>
        </div>


        <div class="container d-inline-flex flex-column">
            <app-lista-falta [projeto]="projeto"></app-lista-falta>

            <app-lista-impedimento [projeto]="projeto"></app-lista-impedimento>

            <app-anotacao [projeto]="projeto"></app-anotacao>

            <button *ngIf="isUsuarioScrumMaster()" type="button" class="btn btn-danger mt-5"
                (click)="excluirProjeto()">Excluir
                Projeto
            </button>

            <button *ngIf="!isUsuarioScrumMaster()" type="button" class="btn btn-danger mt-5"
                (click)="removerParticipante(usuarioLogado)">
                Sair do Projeto
            </button>
        </div>


        <app-daily-review></app-daily-review>

        <!-- Modal Adicionar Participante -->
        <div class="modal fade" id="adicionarParticipanteModal" tabindex="-1"
            aria-labelledby="adicionarParticipanteModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="adicionarParticipanteModalLabel">Adicionar Participante</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form *ngIf="isUsuarioScrumMaster()" [formGroup]="addParticipanteGroup" (ngSubmit)="submit()">
                            <div class="form-group mt-4">
                                <input type="text" class="form-control" id="tempoMedioDeDaily"
                                    placeholder="Digite o email do participante." formControlName="email">
                                <small id="emailHelp" class="form-text text-muted">Digite o e-mail do
                                    participante.</small>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                                <button type="submit" class="btn btn-primary">Cadastrar</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <app-toast [idToast]="'toastAddParticipante'"></app-toast>
        </div>

        <!-- Modal Editar Projeto -->
        <div class="modal fade" id="editarProjetoModal" tabindex="-1" aria-labelledby="editarProjetoModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="editarProjetoModalLabel">Editar Projeto</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <app-cadastro-projeto [projetoEditar]="this.projeto"></app-cadastro-projeto>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div>
    <div *ngIf="!isUsuarioAutorizadoAcesso()" class="alert alert-warning" role="alert">
        Você não possui autorização para acessar o projeto.
    </div>
</div>


<div *ngFor="let dailyLog of projeto.logReunioes" class="card">
    <div class="card-body">
        <div class="d-flex flex-column justify-content-center" style="align-items: center;">
        <h3>
            Review da Daily: {{dailyLog.data}}
        </h3>
            <img class="mr-3 rounded-circle d-flex align-self-center mb-3" src={{projeto.icone}}
                alt="Icone projeto" style="width: 200px; height: 200px; object-fit:cover;">
            <h5 class="card-title d-flex mb-3">{{projeto.nome}}</h5>
        </div>

        <ul class="list-group list-group-flush">
            <li class="list-group-item">
                <button type="button" class="btn btn-primary">
                    Tempo total da Daily <span class="badge text-bg-secondary">{{dailyLog.tempoDecorrido}}</span>
                </button>
            </li>
            <li class="list-group-item">
                <button type="button" class="btn btn-primary">
                    Nº de Impedimentos solucionados <span
                        class="badge text-bg-secondary">{{dailyLog.impedimentosDoDiaList.length}}</span>
                </button>
            </li>
            <li class="list-group-item">
                <button type="button" class="btn btn-primary">
                    Nº de Participantes Faltantes <span
                        class="badge text-bg-secondary">{{projeto.faltasDoDia.length}}</span>
                </button>
            </li>

            <li class="list-group-item">
                <button type="button" class="btn btn-primary">
                    Nota <span
                        class="badge text-bg-secondary">{{dailyLog.notaDaily}}</span>
                </button>
            </li>

            <li *ngFor="let registro of dailyLog.tempoDecorridoReports" class="list-group-item">
                <button type="button" class="btn btn-primary">
                    Tempo de {{registro.usuario.nome}} <span
                        class="badge text-bg-secondary">{{registro.tempoDecorrido}}</span>
                </button>
            </li>
        </ul>
    </div>
</div>